/*! js-sliderWithProgressbar - v0.1.0 - 2015-06-08
* Copyright (c) 2015 Daniel Sattler @ b:dreizehn Licensed MIT */
define(["jquery","slick-carousel"],function(a){return function(b,c,d,e){function f(){return l.$slider=b.find(l.slideSelector).slick(a.extend(l.sliderOptions,{asNavFor:b.find(l.previewSlideSelector)})),l.$previewSlider=b.find(l.previewSlideSelector).slick(a.extend(l.previewSliderOptions,{asNavFor:b.find(l.slideSelector)})),g(l.$slider[0].slick.slickCurrentSlide()),l.$slider.on("beforeChange",function(a,b,c,d){g(d),k=d}),j}function g(b){var c=l.$slider.find('[data-slick-index="'+b+'"]'),d=l.$previewSlider.find('[data-slick-index="'+b+'"]'),e=l.$previewSlider.find('[data-slick-index="'+b+'"]').find(l.progressbarSelector);h(b),d.data("customprogressbar")?a.isFunction(l.onCustomProgressbar)&&l.onCustomProgressbar(c,e):i(b)}function h(a){var b=l.$previewSlider.find('[data-slick-index="'+a+'"]'),c=l.$previewSlider.find('[data-slick-index="'+a+'"]').find(l.progressbarSelector);clearInterval(l.progressInterval),b.prevUntil().find(l.progressbarSelector).css("width","100%"),b.nextUntil().find(l.progressbarSelector).css("width","0%"),c.css("width","0%")}function i(a){var b=0,c=l.$previewSlider.find('[data-slick-index="'+a+'"]').find(l.progressbarSelector),d=l.$slider[0].slick.slickGetOption("autoplaySpeed");clearInterval(l.progressInterval),l.progressInterval=setInterval(function(){100>=b?(b++,c.css({width:b+"%"})):clearInterval(l.progressInterval)},d/100)}var j=this,k="",l=a.extend({progressbarSelector:".bJS_progressbar",slideSelector:".bJS_slider",previewSlideSelector:".bJS_previewSlider",$slider:{},$previewSlider:{},progressInterval:"",onCustomProgressbar:null},c);return l.sliderOptions=a.extend({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,autoplay:!0},d),l.previewSliderOptions=a.extend({slidesToShow:3,slidesToScroll:1,dots:!1,focusOnSelect:!0,centerMode:!0},e),j.stop=function(){clearInterval(l.progressInterval),l.$slider[0].slick.slickPause()},j.start=function(a){h(a?a:k),l.$slider[0].slick.slickPlay()},j.getSlick=function(){return l.$slider[0].slick},f()}});